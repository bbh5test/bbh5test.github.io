import{_ as h,M as f,a as c,c as u,b as o,d as a,t as b,w as _,r as i,o as l,F as v,e as M,f as L,v as I,g as y}from"./index.6be579bd.js";const N={name:"banned",components:{MemberItem:f},computed:{groupInfo(){var e;return(e=this.$store.state)==null?void 0:e.group}},data(){return{groupMemberList:[],loading:!1,finished:!1,error:!1,pageSize:1,pageNumber:1}},mounted(){this.init()},methods:{getRole(e){return this.$store.state.group.providers.includes(e)?2:this.$store.state.group.managers.includes(e)?1:0},async init(){this.loading=!1,this.finished=!1,this.error=!1,this.pageSize=20,this.pageNumber=1;try{this.$store.state.group.groupId||await this.$store.dispatch("getGroupDetail",this.$route.params.groupId),await this.getMemberList()}catch(e){console.log(e)}},async getMemberList(){this.loading=!0;try{let e=this.groupInfo.groupId;if(console.log(e),!e)return;let t=await c.groupMember.getMemberList(e,this.pageSize,this.pageNumber,[1,2]);console.log(t),this.pageNumber==1&&(this.groupMemberList=[]),t.status==1?(this.groupMemberList=this.groupMemberList.concat(t.data),t.data.length<this.pageSize||this.groupMemberList.length>=this.groupInfo.totalMembers?(console.log(222),this.finished=!0):(this.pageNumber++,console.log(this.pageNumber))):this.error=!0}catch{this.error=!0}finally{setTimeout(()=>{this.loading=!1},1e3)}}}},w={class:"banned"},x={class:"member-box"},$={class:"member-number"};function D(e,t,S,k,r,n){const g=i("van-nav-bar"),p=i("MemberItem"),d=i("van-empty"),m=i("van-list");return l(),u("div",w,[o("div",null,[a(g,{"left-arrow":"",onClickLeft:t[0]||(t[0]=s=>e.$router.push({name:"GroupDetail",params:{groupId:e.$route.params.groupId}})),fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2",title:"\u7981\u8A00\u5217\u8868"})]),o("div",null,[o("div",x,[o("div",$,"\u7FA4\u6210\u5458("+b(n.groupInfo.totalMembers)+")",1),a(m,{loading:r.loading,"onUpdate:loading":t[1]||(t[1]=s=>r.loading=s),offset:"100","loading-text":e.$t("loading"),finished:r.finished,"finished-text":e.$t("noMore"),error:r.error,"onUpdate:error":t[2]||(t[2]=s=>r.error=s),"error-text":e.$t("errorText"),onLoad:n.getMemberList,"immediate-check":!1},{default:_(()=>[(l(!0),u(v,null,M(r.groupMemberList,(s,z)=>(l(),y(p,{groupMemberItem:s,role:n.getRole(e.$store.state.user.userAddress),userRole:e.$store.state.user.role},null,8,["groupMemberItem","role","userRole"]))),256)),L(a(d,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[I,r.groupMemberList&&r.groupMemberList.length===0&&!r.loading]])]),_:1},8,["loading","loading-text","finished","finished-text","error","error-text","onLoad"])])])])}const R=h(N,[["render",D],["__scopeId","data-v-70867d55"]]);export{R as default};
