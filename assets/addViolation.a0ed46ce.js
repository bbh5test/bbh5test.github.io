import{_ as b,k as g,d as w,b as i,m as n,w as r,ae as k,r as a,o as V,f as P,p as C,g as S}from"./index.7651113b.js";const I={name:"Penalty",setup(){return{formatterSpace:o=>o.replace(/\s+/g,"")}},data(){return{type:0,showViolationTypePicker:!1,violationColumns:["\u7FA4\u7981\u8A00","\u7FA4\u6162\u901F"],description:"",profilePicture:[],loading:!1}},methods:{onConfirmType(e,o){console.log(o),this.type=o,this.showViolationTypePicker=!1},async onSubmit(e){console.log("submit");let o=this.profilePicture.map(l=>l.file),m=this.$route.params.groupId;this.loading=!0;try{let l=await g.groupViolation.add(o,m,this.type,this.description);console.log(l),l.status==1&&(this.$toast.success(this.$t("submitPenaltySuccessfully")),this.$router.push({name:"GroupDetail",params:{groupId:this.$route.params.groupId}}))}catch(l){console.log(l),this.$toast.fail("\u63D0\u4EA4\u5931\u8D25")}finally{this.loading=!1}}}},p=e=>(C("data-v-fe884b7a"),e=e(),S(),e),T={class:"violation"},x={class:"form-item"},q=p(()=>i("label",null,"\u5904\u7F5A\u7C7B\u578B",-1)),B={class:"form-item"},N=p(()=>i("label",null,"\u5904\u7F5A\u4F9D\u636E",-1)),U={class:"form-item"},$=p(()=>i("label",null,"\u4F9D\u636E\u622A\u56FE",-1)),z={class:"submit-violation"},D=P("\u63D0\u4EA4\u5904\u7F5A");function G(e,o,m,l,t,d){const c=a("van-nav-bar"),u=a("van-field"),f=a("van-picker"),_=a("van-popup"),v=a("van-uploader"),h=a("van-form"),y=a("van-button");return V(),w("div",T,[i("div",null,[n(c,{onClickLeft:o[0]||(o[0]=s=>e.$router.push({name:"GroupDetail",params:{groupId:e.$route.params.groupId}})),"left-arrow":"","safe-area-inset-top":"","z-index":"2",title:"\u8FDD\u89C4\u5904\u7F5A"})]),i("div",null,[n(h,{class:"form-box",ref:"form",onSubmit:d.onSubmit},{default:r(()=>[i("div",x,[q,n(u,{class:"form-input","model-value":t.violationColumns[t.type],onClick:o[1]||(o[1]=s=>t.showViolationTypePicker=!0),"is-link":"","arrow-direction":"down",readonly:"",name:"picker",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5904\u7F5A\u7C7B\u578B"}]},null,8,["model-value"]),n(_,{round:"",show:t.showViolationTypePicker,"onUpdate:show":o[3]||(o[3]=s=>t.showViolationTypePicker=s),position:"bottom","safe-area-inset-bottom":""},{default:r(()=>[n(f,{columns:t.violationColumns,onConfirm:d.onConfirmType,onCancel:o[2]||(o[2]=s=>e.showPenaltyTypePicker=!1)},null,8,["columns","onConfirm"])]),_:1},8,["show"])]),i("div",B,[N,n(u,{class:"form-input",formatter:l.formatterSpace,modelValue:t.description,"onUpdate:modelValue":o[4]||(o[4]=s=>t.description=s),rows:"6",type:"textarea",maxlength:"100",placeholder:"\u8BF7\u8F93\u5165\u7559\u8A00","show-word-limit":"",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5904\u7F5A\u4F9D\u636E"}]},null,8,["formatter","modelValue"])]),i("div",U,[$,n(u,{class:"form-upload","lazy-load":"true",name:"uploader",rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u4F9D\u636E\u622A\u56FE"}]},{input:r(()=>[n(v,{modelValue:t.profilePicture,"onUpdate:modelValue":o[5]||(o[5]=s=>t.profilePicture=s),"max-count":"3","upload-text":"\u6700\u591A3\u5F20"},null,8,["modelValue"])]),_:1})])]),_:1},8,["onSubmit"])]),i("div",z,[n(y,{class:"btn",round:"",block:"",type:"primary",loading:t.loading,onClick:o[6]||(o[6]=k(s=>e.$refs.form.submit(),["stop"])),"native-type":"submit"},{default:r(()=>[D]),_:1},8,["loading"])])])}const L=b(I,[["render",G],["__scopeId","data-v-fe884b7a"]]);export{L as default};
