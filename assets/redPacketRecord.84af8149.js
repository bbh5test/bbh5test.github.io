import{A as I}from"./avatar.23786dba.js";import{_ as R,e as x,h as l,j as e,k as m,g as h,i as u,t as c,w as p,l as v,r as i,o as d,F as C,x as N,p as b,m as w}from"./index.c8b8f13a.js";import{R as L}from"./roleTag.e64fb1c8.js";const P={name:"RedPacketRecord",components:{Avatar:I,RoleTag:L},data(){return{type:0,status:2,count:0,receiveList:[],symbol:"",totalAmount:0,creatorNickname:"",creatorImage:"",creatorUserAddress:"",remark:"",luckyUserAddress:"",sendTime:0,contractChain:"",contractAddress:"",finishTime:0}},methods:{formatTimestamp(t){let r=this.$dayjs.unix(t);return r.isToday()?r.format("HH:mm"):r.format("YYYY-MM-DD HH:mm")},async getDetail(t,r){let a=await x.redPacket.detail(t,r);if(console.dir(a),a.status==1&&(this.status=a.data.status,this.count=a.data.redpacket.count,this.creatorNickname=a.data.creatorNickname,this.creatorImage=a.data.creatorImage,this.creatorUserAddress=a.data.redpacket.creatorAddress,this.symbol=a.data.redpacket.symbol,this.totalAmount=a.data.redpacket.totalAmount,this.remark=a.data.redpacket.remark,this.sendTime=a.data.redpacket.sendTime,this.contractAddress=a.data.redpacket.contractAddress,this.contractChain=a.data.redpacket.contractChain,this.receiveList=a.data.receiveList,this.status==1||this.status==5)){let _=0,s=0;for(let n of this.receiveList)n.amount>_&&(this.luckyUserAddress=n.userAddress),n.time>s&&(s=n.time);this.finishTime=s-this.sendTime}}},mounted(){const t=this.$route.params.groupId,r=this.$route.params.redPacketId;this.getDetail(t,r)}},U=t=>(b("data-v-c97a2753"),t=t(),w(),t),D={class:"container"},S={class:"content"},B={class:"red-packet"},H=U(()=>e("div",{class:"red"},null,-1)),V={class:"icon"},Y={class:"desc"},z={class:"symbol"},F={class:"amount"},M={class:"remark"},j={class:"bottom"},$={class:"explain"},E=v("\xA0"),q={key:0},G={class:"list-item"},J={class:"info"},K={class:"user"},O={class:"username"},Q={class:"address"},W={class:"time"},X={class:"desc"},Z={key:0,class:"lucky"};function ee(t,r,a,_,s,n){const k=i("van-nav-bar"),f=i("van-image"),g=i("Avatar"),A=i("RoleTag"),y=i("van-cell"),T=i("van-list");return d(),l("section",D,[e("div",null,[m(k,{fixed:"",placeholder:"","left-arrow":"","safe-area-inset-top":"","z-index":"2",title:"\u67E5\u770B\u5927\u5BB6\u624B\u6C14",onClickLeft:r[0]||(r[0]=o=>t.$router.push({name:"Chat",params:{groupId:t.$route.params.groupId}}))})]),e("div",S,[e("div",B,[H,e("div",V,[s.contractAddress?(d(),h(f,{key:0,round:"","lazy-load":"","show-loading":"",src:`https://ave.s3.ap-east-1.amazonaws.com/token_icon/${s.contractChain}/${s.contractAddress}.png`,"error-icon":"/assets/images/groupAvatar.png"},null,8,["src"])):u("",!0)]),e("div",Y,[e("div",z,c(s.symbol),1),e("div",F,c(s.totalAmount)+" \u679A",1),e("div",M,c(s.remark?s.remark:"\u606D\u559C\u53D1\u8D22\uFF0C\u5927\u5409\u5927\u5229"),1)])]),e("div",j,[e("div",$,[e("span",null,c(s.count)+"\u4E2A\u7EA2\u5305",1),E,s.finishTime?(d(),l("span",q,c(s.finishTime)+"\u79D2\u88AB\u62A2",1)):u("",!0)]),m(T,{class:"list","finished-text":t.$t("noMore")},{default:p(()=>[(d(!0),l(C,null,N(s.receiveList,o=>(d(),h(y,null,{default:p(()=>[e("div",G,[m(g,{class:"avatar",image:o.userImage,address:o.userAddress},null,8,["image","address"]),e("div",J,[e("div",K,[m(A,{class:"role",role:o.groupRole,userRole:o.userRole},null,8,["role","userRole"]),e("div",O,[v(c(t.$f.getUserShowName({userAddress:o.userAddress,nickname:o.userNickname})),1),e("span",Q,"("+c(t.$f.formatAddress(o.userAddress))+")",1)])]),e("div",W,c(n.formatTimestamp(o.time)),1)]),e("div",X,[e("div",null,c(o.amount.toFixed(4))+"\u679A",1),s.luckyUserAddress==o.userAddress?(d(),l("div",Z," \u624B\u6C14\u6700\u4F73 ")):u("",!0)])])]),_:2},1024))),256))]),_:1},8,["finished-text"])])])])}const oe=R(P,[["render",ee],["__scopeId","data-v-c97a2753"]]);export{oe as default};
