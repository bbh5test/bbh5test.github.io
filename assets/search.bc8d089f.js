import{_ as k,D as S,A as w,T,d as v,g as f,i as s,j as r,w as c,F as g,r as o,o as n,u as B,t as h,f as _,p as L,l as V,k as p}from"./index.2b2030c9.js";const N={name:"Search",components:{DialogBase:S,Avatar:w},watch:{searchText(e){e||(this.groupList=[])}},data(){return{searchLoading:!1,createVisable:!1,currentGroup:{name:"",address:"",chain:"",type:""},searchText:"",groupList:[]}},methods:{onCancel(){this.$router.push({name:"Chats"})},async onSearch(){if(!this.searchText){T("\u641C\u7D22\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A");return}this.groupList=[],this.searchLoading=!0;let e=await v.group.search(this.searchText);this.searchLoading=!1,console.dir(e),this.groupList=e.data?e.data:[]},clickGroup(e){e.isCreated?this.$router.push("/group/"+e.address+"-"+e.chain+"/chat"):(this.currentGroup.name=this.$f.getGroupShowName(e),this.currentGroup.address=e.address,this.currentGroup.chain=e.chain,this.currentGroup.type=e.type,this.createVisable=!0)},async createGroup(){let e=await v.group.create(this.currentGroup.address,this.currentGroup.chain,this.currentGroup.type);console.log(e),e.status==1&&this.$router.push("/group/"+e.data.groupId+"/chat")}},mounted(){this.$refs.searchBar.focus()}},i=e=>(L("data-v-6adf3549"),e=e(),V(),e),D={class:"myChats-container"},I={action:"/"},A={class:"chats-container"},j={class:"chat-item"},F={class:"content"},J={class:"left"},O={class:"title"},U=p("\u5DF2\u52A0\u5165"),z=p(" \u672A\u52A0\u5165 "),E=p("\u672A\u521B\u5EFA"),q=i(()=>s("div",{class:"info"},null,-1)),H={class:"dialog-body"},K=i(()=>s("div",{class:"tip"},"\u8FD9\u4E2AToken\u7684\u7FA4\u804A\u8FD8\u672A\u88AB\u521B\u5EFA,\u4F60\u786E\u5B9A\u521B\u5EFA\u5E76\u52A0\u5165\u5B83\u5417?",-1)),M={class:"cell-list"},P={class:"cell"},Q=i(()=>s("div",{class:"lable"},"\u7FA4\u540D\u79F0:",-1)),R={class:"value"},W={class:"cell"},X=i(()=>s("div",{class:"lable"},"Token\u5730\u5740:",-1)),Y={class:"value"},Z={class:"cell"},$=i(()=>s("div",{class:"lable"},"\u94FE\u540D\u79F0:",-1)),ee={class:"value"};function se(e,l,ae,te,t,d){const m=o("van-nav-bar"),G=o("van-search"),C=o("Avatar"),u=o("sapn"),x=o("van-cell"),y=o("van-list"),b=o("DialogBase");return n(),f(g,null,[s("section",D,[s("div",null,[r(m,{fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2",title:"Chats"})]),s("div",null,[s("form",I,[r(G,{modelValue:t.searchText,"onUpdate:modelValue":l[0]||(l[0]=a=>t.searchText=a),shape:"round","show-action":"",placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",ref:"searchBar",onCancel:d.onCancel,onSearch:d.onSearch},null,8,["modelValue","onCancel","onSearch"])]),s("div",A,[r(y,{"error-text":" \u8BF7\u6C42\u5931\u8D25\uFF0C\u70B9\u51FB\u91CD\u65B0\u52A0\u8F7D",loading:t.searchLoading,"loading-text":"\u8F7D\u5165\u4E2D"},{default:c(()=>[(n(!0),f(g,null,B(t.groupList,a=>(n(),_(x,{onClick:oe=>d.clickGroup(a),class:"chat-item-cell"},{default:c(()=>[s("div",j,[r(C,{class:"avatar",image:a.image,address:a.address},null,8,["image","address"]),s("div",F,[s("div",null,[s("div",J,[s("div",O,h(e.$f.getGroupShowName(a)),1),a.isJoined?(n(),_(u,{key:0,class:"tag"},{default:c(()=>[U]),_:1})):a.isCreated&&!a.isJoined?(n(),_(u,{key:1,class:"tag tag-no-join"},{default:c(()=>[z]),_:1})):(n(),_(u,{key:2,class:"tag tag-no-create"},{default:c(()=>[E]),_:1}))])]),q])])]),_:2},1032,["onClick"]))),256))]),_:1},8,["loading"])])])]),r(b,{class:"create-dialog",visible:t.createVisable,"onUpdate:visible":l[1]||(l[1]=a=>t.createVisable=a),title:"\u63D0\u793A",showCancelButton:"",onOnConfirm:d.createGroup},{default:c(()=>[s("div",H,[K,s("div",M,[s("div",P,[Q,s("div",R,h(t.currentGroup.name),1)]),s("div",W,[X,s("div",Y,h(e.$f.getGroupShowName({address:t.currentGroup.address})),1)]),s("div",Z,[$,s("div",ee,h(t.currentGroup.chain),1)])])])]),_:1},8,["visible","onOnConfirm"])],64)}const ne=k(N,[["render",se],["__scopeId","data-v-6adf3549"]]);export{ne as default};
