import{_ as m,C as _,d as v,o as a,g as d,i as c,j as r,w as g,F as L,u as $,r as i,f as M}from"./index.db2949da.js";const B={name:"Pined",components:{ChatItem:_},computed:{title(){return`\u7F6E\u9876\u6D88\u606F(${this.$store.state.group.pinedMsgTotal})`}},data(){return{listLoading:!1,listFinished:!1}},methods:{async onLastPage(){let e=-1;this.$store.state.group.pinedMsgList.length>0&&(e=this.$store.state.group.pinedMsgList[0].id);let t=await v.group.getPinedMsgs(this.$store.state.group.groupId,10,e);if(t.status==1){if(t.data.pinMsg.length>0)for(let s=t.data.pinMsg.length-1;s>=0;s--)console.log(t.data.pinMsg[s].id),this.$store.commit("addPinedMsgUnshift",t.data.pinMsg[s]);t.data.pinMsg.length<10&&(this.listFinished=!0)}this.$refs.rightBody.scrollTop=1,this.listLoading=!1},scrollToBottom(){this.$nextTick(()=>{this.$refs.rightBody.scrollTop=this.$refs.rightBody.scrollHeight})}},mounted(){this.scrollToBottom()}},k={class:"container"},C={class:"content",ref:"rightBody"};function x(e,t,s,y,n,l){const p=i("van-nav-bar"),h=i("ChatItem"),f=i("van-cell"),u=i("van-list");return a(),d("section",k,[c("div",null,[r(p,{"left-arrow":"",fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2",title:l.title,onClickLeft:t[0]||(t[0]=o=>e.$router.go(-1))},null,8,["title"])]),c("div",C,[r(u,{class:"chat-list","finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",direction:"up",loading:n.listLoading,"onUpdate:loading":t[1]||(t[1]=o=>n.listLoading=o),finished:n.listFinished,onLoad:l.onLastPage,"immediate-check":!1},{default:g(()=>[(a(!0),d(L,null,$(e.$store.state.group.pinedMsgList,o=>(a(),M(f,{key:o.id},{default:g(()=>[r(h,{source:o},null,8,["source"])]),_:2},1024))),128))]),_:1},8,["loading","finished","onLoad"])],512)])}const T=m(B,[["render",x],["__scopeId","data-v-9115ebce"]]);export{T as default};
