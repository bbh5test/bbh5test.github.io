import{A as T}from"./avatar.0dbdb42c.js";import{_ as I,d as R,g as m,i as e,j as c,t as i,h as u,w as p,k as h,r as n,o as l,F as N,u as b,p as x,l as w,f as L}from"./index.68a2c8a6.js";import{R as P}from"./roleTag.653a2c77.js";const U={name:"RedPacketRecord",components:{Avatar:T,RoleTag:P},data(){return{type:0,status:2,count:0,receiveList:[],symbol:"",totalAmount:0,creatorNickname:"",creatorImage:"",creatorUserAddress:"",remark:"",luckyUserAddress:"",sendTime:0,finishTime:0}},methods:{formatTimestamp(s){let r=this.$dayjs.unix(s);return r.isToday()?r.format("HH:mm"):r.format("YYYY-MM-DD HH:mm")},async getDetail(s,r){let t=await R.redPacket.detail(s,r);if(console.dir(t),t.status==1&&(this.status=t.data.status,this.count=t.data.redpacket.count,this.creatorNickname=t.data.creatorNickname,this.creatorImage=t.data.creatorImage,this.creatorUserAddress=t.data.redpacket.creatorAddress,this.symbol=t.data.redpacket.symbol,this.totalAmount=t.data.redpacket.totalAmount,this.remark=t.data.redpacket.remark,this.sendTime=t.data.redpacket.sendTime,this.receiveList=t.data.receiveList,this.status==1||this.status==5)){let _=0,a=0;for(let d of this.receiveList)d.amount>_&&(this.luckyUserAddress=d.userAddress),d.time>a&&(a=d.time);this.finishTime=a-this.sendTime}}},mounted(){const s=this.$route.params.groupId,r=this.$route.params.redPacketId;this.getDetail(s,r)}},C=s=>(x("data-v-7e637177"),s=s(),w(),s),D={class:"container"},S={class:"content"},B={class:"red-packet"},H=C(()=>e("div",{class:"red"},null,-1)),V={class:"icon"},Y={class:"desc"},j={class:"symbol"},F={class:"amount"},z={class:"remark"},M={class:"bottom"},$={class:"explain"},E=h("\xA0"),q={key:0},G={class:"list-item"},J={class:"info"},K={class:"user"},O={class:"username"},Q={class:"address"},W={class:"time"},X={class:"desc"},Z={key:0,class:"lucky"};function ee(s,r,t,_,a,d){const v=n("van-nav-bar"),k=n("van-image"),f=n("Avatar"),g=n("RoleTag"),A=n("van-cell"),y=n("van-list");return l(),m("section",D,[e("div",null,[c(v,{fixed:"",placeholder:"","left-arrow":"","safe-area-inset-top":"","z-index":"2",title:"\u67E5\u770B\u5927\u5BB6\u624B\u6C14",onClickLeft:r[0]||(r[0]=o=>s.$router.push({name:"Chat",params:{groupId:s.$route.params.groupId}}))})]),e("div",S,[e("div",B,[H,e("div",V,[c(k,{round:"","lazy-load":"","show-loading":"",src:"https://static.gao.link/avatar.jpg"})]),e("div",Y,[e("div",j,i(a.symbol),1),e("div",F,i(a.totalAmount)+" \u679A",1),e("div",z,i(a.remark?a.remark:"\u606D\u559C\u53D1\u8D22\uFF0C\u5927\u5409\u5927\u5229"),1)])]),e("div",M,[e("div",$,[e("span",null,i(a.count)+"\u4E2A\u7EA2\u5305",1),E,a.finishTime?(l(),m("span",q,i(a.finishTime)+"\u79D2\u88AB\u62A2",1)):u("",!0)]),c(y,{class:"list","finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86"},{default:p(()=>[(l(!0),m(N,null,b(a.receiveList,o=>(l(),L(A,null,{default:p(()=>[e("div",G,[c(f,{class:"avatar",image:o.userImage,address:o.userAddress},null,8,["image","address"]),e("div",J,[e("div",K,[c(g,{class:"role",role:o.groupRole,userRole:o.userRole},null,8,["role","userRole"]),e("div",O,[h(i(s.$f.getUserShowName({userAddress:o.userAddress,nickname:o.userNickname})),1),e("span",Q,"("+i(s.$f.formatAddress(o.userAddress))+")",1)])]),e("div",W,i(d.formatTimestamp(o.time)),1)]),e("div",X,[e("div",null,i(o.amount.toFixed(2))+"\u679A",1),a.luckyUserAddress==o.userAddress?(l(),m("div",Z," \u624B\u6C14\u6700\u4F73 ")):u("",!0)])])]),_:2},1024))),256))]),_:1})])])])}const oe=I(U,[["render",ee],["__scopeId","data-v-7e637177"]]);export{oe as default};
