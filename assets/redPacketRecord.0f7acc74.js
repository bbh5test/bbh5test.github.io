import{A as T}from"./avatar.0e846d0c.js";import{_ as I,k as R,d as l,b as e,m,a as h,e as u,t as n,w as p,f as b,r as i,o as d,F as C,x as L,p as N,g as w}from"./index.334a89c2.js";import{R as x}from"./roleTag.3767ee21.js";const P={name:"RedPacketRecord",components:{Avatar:T,RoleTag:x},data(){return{type:0,status:2,count:0,receiveList:[],symbol:"",totalAmount:0,creatorNickname:"",creatorImage:"",creatorUserAddress:"",remark:"",luckyUserAddress:"",sendTime:0,contractChain:"",contractAddress:"",finishTime:0}},methods:{formatTimestamp(s){let o=this.$dayjs.unix(s);return o.isToday()?o.format("HH:mm"):o.format("YYYY-MM-DD HH:mm")},async getDetail(s,o){let a=await R.redPacket.detail(s,o);if(console.dir(a),a.status==1&&(this.status=a.data.status,this.count=a.data.redpacket.count,this.creatorNickname=a.data.creatorNickname,this.creatorImage=a.data.creatorImage,this.creatorUserAddress=a.data.redpacket.creatorAddress,this.symbol=a.data.redpacket.symbol,this.totalAmount=a.data.redpacket.totalAmount,this.remark=a.data.redpacket.remark,this.sendTime=a.data.redpacket.sendTime,this.contractAddress=a.data.redpacket.contractAddress,this.contractChain=a.data.redpacket.contractChain,this.receiveList=a.data.receiveList,this.status==1||this.status==5)){let _=0,t=0;for(let c of this.receiveList)c.amount>_&&(this.luckyUserAddress=c.userAddress),c.time>t&&(t=c.time);this.finishTime=t-this.sendTime}}},mounted(){const s=this.$route.params.groupId,o=this.$route.params.redPacketId;this.getDetail(s,o)}},U=s=>(N("data-v-74e52489"),s=s(),w(),s),D={class:"container"},S={class:"content"},B={class:"red-packet"},H=U(()=>e("div",{class:"red"},null,-1)),V={class:"icon"},Y={class:"desc"},$={class:"symbol"},z={class:"amount"},F={class:"remark"},M={class:"bottom"},j={class:"explain"},E=b("\xA0"),W={key:0},q={class:"list-item"},G={class:"info"},J={class:"user"},K={class:"username"},O={class:"time"},Q={class:"desc"},X={key:0,class:"lucky"};function Z(s,o,a,_,t,c){const v=i("van-nav-bar"),k=i("van-image"),f=i("Avatar"),g=i("RoleTag"),A=i("van-cell"),y=i("van-list");return d(),l("section",D,[e("div",null,[m(v,{fixed:"","left-arrow":"","safe-area-inset-top":"","z-index":"2",title:s.$t("seeLuck"),onClickLeft:o[0]||(o[0]=r=>s.$router.push({name:"Chat",params:{groupId:s.$route.params.groupId}}))},null,8,["title"])]),e("div",S,[e("div",B,[H,e("div",V,[t.contractAddress?(d(),h(k,{key:0,round:"","lazy-load":"","show-loading":"",src:`https://ave.s3.ap-east-1.amazonaws.com/token_icon/${t.contractChain}/${t.contractAddress}.png`,"error-icon":"/assets/images/groupAvatar.png"},null,8,["src"])):u("",!0)]),e("div",Y,[e("div",$,n(t.symbol),1),e("div",z,n(t.totalAmount)+" \u679A",1),e("div",F,n(t.remark?t.remark:s.$t("bestWishes")),1)])]),e("div",M,[e("div",j,[e("span",null,n(t.count)+"\u4E2A\u7EA2\u5305",1),E,t.finishTime?(d(),l("span",W,n(t.finishTime)+"\u79D2\u88AB\u62A2",1)):u("",!0)]),m(y,{class:"list","finished-text":s.$t("noMore")},{default:p(()=>[(d(!0),l(C,null,L(t.receiveList,r=>(d(),h(A,null,{default:p(()=>[e("div",q,[m(f,{class:"avatar",image:r.userImage,address:r.userAddress},null,8,["image","address"]),e("div",G,[e("div",J,[m(g,{class:"role",role:r.groupRole,userRole:r.userRole},null,8,["role","userRole"]),e("div",K,n(s.$f.getUserShowName({userAddress:r.userAddress,nickname:r.userNickname})),1)]),e("div",O,n(c.formatTimestamp(r.time)),1)]),e("div",Q,[e("div",null,n(r.amount.toFixed(4))+"\u679A",1),t.luckyUserAddress==r.userAddress?(d(),l("div",X,n(s.$t("bestLuck")),1)):u("",!0)])])]),_:2},1024))),256))]),_:1},8,["finished-text"])])])])}const ae=I(P,[["render",Z],["__scopeId","data-v-74e52489"]]);export{ae as default};
