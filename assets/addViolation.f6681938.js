import{_,k as g,d as w,b as s,m as i,w as u,ae as P,r as l,o as k,t as p,f as V}from"./index.4e068457.js";const $={name:"Penalty",data(){return{type:0,showViolationTypePicker:!1,violationColumns:[this.$t("groupBan"),this.$t("groupSlow")],description:"",profilePicture:[],loading:!1}},methods:{descriptionFormatterSpace(){this.description=this.description.trim()},onConfirmType(o,e){console.log(e),this.type=e,this.showViolationTypePicker=!1},async onSubmit(o){console.log("submit");let e=this.profilePicture.map(a=>a.file),d=this.$route.params.groupId;this.loading=!0;try{(await g.groupViolation.add(e,d,this.type,this.description)).status==1&&(this.$toast.success(this.$t("submitPenaltySuccessfully")),this.$router.push({name:"GroupDetail",params:{groupId:this.$route.params.groupId}}))}catch(a){console.log(a)}finally{this.loading=!1}},onOversize(){this.$toast(this.$t("imageOverSize"))}}},C={class:"violation"},S={class:"form-item"},T={class:"form-item"},B={class:"form-item"},z={class:"submit-violation"};function I(o,e,d,a,t,r){const c=l("van-nav-bar"),m=l("van-field"),f=l("van-picker"),v=l("van-popup"),y=l("van-uploader"),b=l("van-form"),h=l("van-button");return k(),w("div",C,[s("div",null,[i(c,{onClickLeft:e[0]||(e[0]=n=>o.$router.push({name:"GroupDetail",params:{groupId:o.$route.params.groupId}})),"left-arrow":"","safe-area-inset-top":"","z-index":"2",title:o.$t("violationPenalty")},null,8,["title"])]),s("div",null,[i(b,{class:"form-box",ref:"form",onSubmit:r.onSubmit},{default:u(()=>[s("div",S,[s("label",null,p(o.$t("penaltyType")),1),i(m,{class:"form-input","model-value":t.violationColumns[t.type],onClick:e[1]||(e[1]=n=>t.showViolationTypePicker=!0),"is-link":"","arrow-direction":"down",readonly:"",name:"picker",rules:[{required:!0,message:o.$t("selectPenaltyType")}]},null,8,["model-value","rules"]),i(v,{round:"",show:t.showViolationTypePicker,"onUpdate:show":e[3]||(e[3]=n=>t.showViolationTypePicker=n),position:"bottom","safe-area-inset-bottom":""},{default:u(()=>[i(f,{columns:t.violationColumns,onConfirm:r.onConfirmType,onCancel:e[2]||(e[2]=n=>o.showPenaltyTypePicker=!1),"confirm-button-text":o.$t("confirm"),"cancel-button-text":o.$t("cancel")},null,8,["columns","onConfirm","confirm-button-text","cancel-button-text"])]),_:1},8,["show"])]),s("div",T,[s("label",null,p(o.$t("penaltyBasis")),1),i(m,{class:"form-input",onBlur:r.descriptionFormatterSpace,modelValue:t.description,"onUpdate:modelValue":e[4]||(e[4]=n=>t.description=n),rows:"6",type:"textarea",maxlength:"100",placeholder:o.$t("enterPanaltyBasis"),"show-word-limit":"",rules:[{required:!0,message:o.$t("enterPanaltyBasis")}]},null,8,["onBlur","modelValue","placeholder","rules"])]),s("div",B,[s("label",null,p(o.$t("basedOnScreenshots")),1),i(m,{class:"form-upload","lazy-load":"true",name:"uploader",rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u4F9D\u636E\u622A\u56FE"}]},{input:u(()=>[i(y,{modelValue:t.profilePicture,"onUpdate:modelValue":e[5]||(e[5]=n=>t.profilePicture=n),"max-count":"3","upload-text":o.$t("max3"),"max-size":1024*1024,onOversize:r.onOversize},null,8,["modelValue","upload-text","onOversize"])]),_:1})])]),_:1},8,["onSubmit"])]),s("div",z,[i(h,{class:"btn",round:"",block:"",type:"primary",loading:t.loading,onClick:e[6]||(e[6]=P(n=>o.$refs.form.submit(),["stop"])),"native-type":"submit"},{default:u(()=>[V(p(o.$t("submitPenalty")),1)]),_:1},8,["loading"])])])}const q=_($,[["render",I],["__scopeId","data-v-bd1c4c85"]]);export{q as default};
