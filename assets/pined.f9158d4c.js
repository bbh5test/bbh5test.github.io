import{C as _}from"./chatItem.fedcd078.js";import{_ as m,e as v,h as d,j as p,k as a,w as c,r as i,o as r,F as $,x as L,g as M}from"./index.84cb370a.js";import"./avatar.8f6daa6f.js";import"./roleTag.47df83d7.js";import"./dialogBase.fc931ad6.js";const B={name:"Pined",components:{ChatItem:_},computed:{title(){return`${this.$t("topMessages")}(${this.$store.state.group.pinedMsgTotal})`}},data(){return{listLoading:!1,listFinished:!1}},methods:{async onLastPage(){let e=-1;this.$store.state.group.pinedMsgList.length>0&&(e=this.$store.state.group.pinedMsgList[0].id);let t=await v.group.getPinedMsgs(this.$store.state.group.groupId,10,e);if(t.status==1){if(t.data.pinMsg.length>0)for(let s=t.data.pinMsg.length-1;s>=0;s--)console.log(t.data.pinMsg[s].id),this.$store.commit("addPinedMsgUnshift",t.data.pinMsg[s]);t.data.pinMsg.length<10&&(this.listFinished=!0)}this.$refs.rightBody.scrollTop=1,this.listLoading=!1},scrollToBottom(){this.$nextTick(()=>{this.$refs.rightBody.scrollTop=this.$refs.rightBody.scrollHeight})}},mounted(){this.scrollToBottom()}},k={class:"container"},x={class:"content",ref:"rightBody"};function y(e,t,s,C,n,l){const g=i("van-nav-bar"),h=i("ChatItem"),f=i("van-cell"),u=i("van-list");return r(),d("section",k,[p("div",null,[a(g,{"left-arrow":"",fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2",title:l.title,onClickLeft:t[0]||(t[0]=o=>e.$router.go(-1))},null,8,["title"])]),p("div",x,[a(u,{class:"chat-list","finished-text":e.$t("noMore"),direction:"up",loading:n.listLoading,"onUpdate:loading":t[1]||(t[1]=o=>n.listLoading=o),finished:n.listFinished,onLoad:l.onLastPage,"immediate-check":!1},{default:c(()=>[(r(!0),d($,null,L(e.$store.state.group.pinedMsgList,o=>(r(),M(f,{key:o.id},{default:c(()=>[a(h,{source:o},null,8,["source"])]),_:2},1024))),128))]),_:1},8,["finished-text","loading","finished","onLoad"])],512)])}const b=m(B,[["render",y],["__scopeId","data-v-9614f996"]]);export{b as default};
